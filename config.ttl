@prefix fuseki: <http://jena.apache.org/fuseki#> .
@prefix tdb2:   <http://jena.apache.org/2016/tdb#> .
@prefix ja:     <http://jena.hpl.hp.com/2005/11/Assembler#> .
@prefix rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix :       <#> .

#################################################################
# Server configuration
#################################################################
[] a fuseki:Server ;
   fuseki:authConfig "shiro.ini" ;
   fuseki:datasets "/opt/fuseki/databases" ;
   fuseki:services ( :service-ds ) ;
   # fuseki:services ( :service-ds :service-ontology ) ;
   fuseki:datasetDescription "/opt/fuseki/databases" .

#################################################################
# Service configuration for default inference-enabled dataset
#################################################################
:service-ds  a fuseki:Service ;
    fuseki:name     "ds" ;
    fuseki:dataset  :dataset-ds-inf ;
    fuseki:endpoint  [ fuseki:operation fuseki:query  ; fuseki:name "sparql" ] ,
                     [ fuseki:operation fuseki:update ; fuseki:name "update" ] ,
                     [ fuseki:operation fuseki:gsp-rw ; fuseki:name "data"   ] ,
                     [ fuseki:operation fuseki:upload ; fuseki:name "upload" ] .

#################################################################
# Dataset configuration for default dataset with inference
#################################################################
:store-ds  a tdb2:DatasetTDB2 ;
        tdb2:location "/opt/fuseki/databases/ds" ;
        tdb2:unionDefaultGraph true .

:storeGraph-ds  a tdb2:GraphTDB ;
        tdb2:dataset :store-ds .

:infGraph-ds  a ja:InfModel ;
        ja:baseModel  :storeGraph-ds ;
        ja:reasoner   [ ja:reasonerURL <http://jena.hpl.hp.com/2003/OWLFBRuleReasoner> ] .

:dataset-ds-inf  a ja:RDFDataset ;
        ja:defaultGraph :infGraph-ds .

#################################################################
# Service configuration for ontology inference-enabled dataset
# Use to enable a second dataset
#################################################################
# :service-ontology  a fuseki:Service ;
#     fuseki:name     "ontology" ;
#     fuseki:dataset  :dataset-ontology-inf ;
#     fuseki:endpoint  [ fuseki:operation fuseki:query  ; fuseki:name "sparql" ] ,
#                      [ fuseki:operation fuseki:update ; fuseki:name "update" ] ,
#                      [ fuseki:operation fuseki:gsp-rw ; fuseki:name "data"   ] ,
#                      [ fuseki:operation fuseki:upload ; fuseki:name "upload" ] .

#################################################################
# Dataset configuration for ontology dataset with inference
#################################################################
#:store-ontology  a tdb2:DatasetTDB2 ;
#        tdb2:location "/opt/fuseki/databases/ontology" ;
#        tdb2:unionDefaultGraph true .
#
#:storeGraph-ontology  a tdb2:GraphTDB ;
#        tdb2:dataset :store-ontology .
#
#:infGraph-ontology  a ja:InfModel ;
#        ja:baseModel  :storeGraph-ontology ;
#        ja:reasoner   [ ja:reasonerURL <http://jena.hpl.hp.com/2003/OWLFBRuleReasoner> ] .
#
#:dataset-ontology-inf  a ja:RDFDataset ;
#        ja:defaultGraph :infGraph-ontology .